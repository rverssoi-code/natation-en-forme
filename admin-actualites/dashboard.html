<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Actualit√©s Natation En Forme</title>
    <link rel="stylesheet" href="admin-style.css">
    <style>
        /* Barre d'outils d'√©dition */
        .editor-toolbar {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 8px;
            flex-wrap: wrap;
        }
        
        .editor-btn {
            padding: 8px 12px;
            background: white;
            border: 2px solid var(--beige-chaud);
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s ease;
            font-weight: 600;
        }
        
        .editor-btn:hover {
            background: var(--vert-sauge);
            color: white;
            border-color: var(--vert-sauge);
            transform: translateY(-2px);
        }
        
        .editor-btn strong {
            font-size: 18px;
        }
        
        .editor-btn em {
            font-size: 18px;
            font-style: italic;
        }
        
        /* Message de bienvenue pour Lynn üíô */
        .welcome-message {
            font-family: 'Gabriela', cursive;
            color: var(--vert-sauge);
            font-size: 1rem;
            margin-top: 12px;
            font-style: italic;
            opacity: 0;
            animation: fadeIn 1.5s ease forwards;
            animation-delay: 0.5s;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="dashboard">
    <!-- Hero avec vid√©o d'eau -->
    <div class="hero-background">
        <video class="hero-video" autoplay muted loop playsinline>
            <source src="../videos/hero-natation.mp4" type="video/mp4">
        </video>
        <div class="hero-overlay"></div>
    </div>

    <div class="dashboard-container">
        <!-- Header -->
        <div class="dashboard-header">
            <div class="dashboard-title">
                <div>
                    <h1>üèä‚Äç‚ôÄÔ∏è Natation En Forme üèä‚Äç‚ôÄÔ∏è</h1>
                    <p class="subtitle">Gestion de contenu</p>
                    <p class="welcome-message">‚ú® Bienvenue Lynn ‚ú®<br>Que ton moment pr√©sent soit merveilleux üå∏</p>
                </div>
            </div>
            <div class="dashboard-actions">
                <a href="../index.html" class="btn btn-secondary" target="_blank">
                    üëÅÔ∏è Voir le site üëÅÔ∏è
                </a>
                <button id="logoutBtn" class="btn btn-logout">
                    üö™ D√©connexion üö™
                </button>
            </div>
        </div>

        <!-- Grid principal -->
        <div class="dashboard-grid">
            <!-- Panneau d'√©dition -->
            <div class="editor-panel">
                <h2 id="editorTitle">‚úèÔ∏è Nouvelle actualit√© ‚úèÔ∏è</h2>
                
                <form id="actualiteForm">
                    <input type="hidden" id="actualiteId">
                    
                    <div class="form-group">
                        <label for="titre">Titre</label>
                        <input type="text" id="titre" placeholder="Ex: Nouvelle pens√©e du jour" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="date">Date de publication</label>
                        <input type="date" id="date" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="contenu">Contenu</label>
                        
                        <!-- üé® BARRE D'OUTILS D'√âDITION -->
                        <div class="editor-toolbar">
                            <button type="button" class="editor-btn" onclick="insertFormat('bold')" title="Gras">
                                <strong>B</strong>
                            </button>
                            <button type="button" class="editor-btn" onclick="insertFormat('italic')" title="Italique">
                                <em>I</em>
                            </button>
                            <button type="button" class="editor-btn" onclick="insertFormat('highlight')" title="Surlign√© jaune">
                                üü°
                            </button>
                            <button type="button" class="editor-btn" onclick="insertFormat('red')" title="Texte rouge">
                                üî¥
                            </button>
                            <button type="button" class="editor-btn" onclick="insertFormat('important')" title="Important (rouge + gras + surlign√©)">
                                ‚ö†Ô∏è
                            </button>
                            <button type="button" class="editor-btn" onclick="insertFormat('br')" title="Saut de ligne">
                                ‚Üµ
                            </button>
                        </div>
                        
                        <textarea id="contenu" placeholder="√âcrivez votre actualit√© ici..." required></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" id="saveDraftBtn" class="btn btn-secondary">
                            üíæ Sauvegarder brouillon üíæ
                        </button>
                        <button type="submit" class="btn btn-primary">
                            üöÄ Publier üöÄ
                        </button>
                        <button type="button" id="cancelBtn" class="btn btn-secondary" style="display:none;">
                            ‚ùå Annuler ‚ùå
                        </button>
                    </div>
                    
                    <div id="statusMessage" class="status-indicator" style="display:none;"></div>
                </form>
            </div>

            <!-- Liste des actualit√©s -->
            <div class="actualites-list">
                <h2>üìö Mes actualit√©s üìö</h2>
                
                <div style="margin-bottom: 20px; display: flex; gap: 10px;">
                    <button id="showAllBtn" class="btn btn-small btn-secondary">Toutes</button>
                    <button id="showPublishedBtn" class="btn btn-small btn-secondary">Publi√©es</button>
                    <button id="showDraftsBtn" class="btn btn-small btn-secondary">Brouillons</button>
                </div>
                
                <div id="actualitesList">
                    <!-- Les actualit√©s seront charg√©es ici -->
                    <p style="text-align: center; color: var(--gris-doux); padding: 40px;">
                        Aucune actualit√© pour le moment.<br>
                        Commencez par en cr√©er une ! üå±
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script src="admin.js"></script>
    
    <script>
        // ========================================
        // üé® FONCTIONS D'√âDITION
        // ========================================
        
        function insertFormat(type) {
            const textarea = document.getElementById('contenu');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            
            let before = '';
            let after = '';
            let newText = '';
            
            switch(type) {
                case 'bold':
                    before = '<strong>';
                    after = '</strong>';
                    newText = selectedText || 'texte en gras';
                    break;
                    
                case 'italic':
                    before = '<em>';
                    after = '</em>';
                    newText = selectedText || 'texte en italique';
                    break;
                    
                case 'highlight':
                    before = '<mark>';
                    after = '</mark>';
                    newText = selectedText || 'texte surlign√©';
                    break;
                    
                case 'red':
                    before = '<span style="color: red;">';
                    after = '</span>';
                    newText = selectedText || 'texte rouge';
                    break;
                    
                case 'important':
                    before = '<strong style="color: red; background-color: yellow; padding: 2px 6px;">';
                    after = '</strong>';
                    newText = selectedText || 'IMPORTANT';
                    break;
                    
                case 'br':
                    before = '';
                    after = '<br>';
                    newText = selectedText;
                    break;
            }
            
            // Ins√©rer le texte format√©
            const replacement = before + newText + after;
            textarea.value = textarea.value.substring(0, start) + replacement + textarea.value.substring(end);
            
            // Repositionner le curseur
            const newPosition = start + replacement.length;
            textarea.focus();
            textarea.setSelectionRange(newPosition, newPosition);
        }
        
        // ========================================
        // PROTECTION & D√âCONNEXION
        // ========================================
        
        // Protection : v√©rifier l'authentification
        if (sessionStorage.getItem('rvs_admin_auth') !== 'true') {
            window.location.href = 'index.html';
        }
        
        // D√©connexion
        document.getElementById('logoutBtn').addEventListener('click', function() {
            sessionStorage.removeItem('rvs_admin_auth');
            window.location.href = 'index.html';
        });
    </script>
</body>
</html>
